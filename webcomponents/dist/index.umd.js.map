{"version":3,"file":"index.umd.js","sources":["../node_modules/nipplejs/src/utils.js","../node_modules/nipplejs/src/super.js","../node_modules/nipplejs/src/nipple.js","../node_modules/nipplejs/src/collection.js","../node_modules/nipplejs/src/manager.js","../node_modules/nipplejs/src/index.js","../model/joy-rtc.ts"],"sourcesContent":["///////////////////////\n///      UTILS      ///\n///////////////////////\n\nexport const distance = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\nexport const angle = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return degrees(Math.atan2(dy, dx));\n};\n\nexport const findCoord = (p, d, a) => {\n    const b = {x: 0, y: 0};\n    a = radians(a);\n    b.x = p.x - d * Math.cos(a);\n    b.y = p.y - d * Math.sin(a);\n    return b;\n};\n\nexport const radians = (a) => {\n    return a * (Math.PI / 180);\n};\n\nexport const degrees = (a) => {\n    return a * (180 / Math.PI);\n};\n\nexport const isPressed = (evt) => {\n    if (isNaN(evt.buttons)) {\n        return evt.pressure !== 0;\n    }\n    return evt.buttons !== 0;\n};\n\nconst timers = new Map();\nexport const throttle = (cb) => {\n    if (timers.has(cb)) {\n        clearTimeout(timers.get(cb));\n    }\n    timers.set(cb, setTimeout(cb, 100));\n};\n\nexport const bindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.addEventListener) {\n            el.addEventListener(type, handler, false);\n        } else if (el.attachEvent) {\n            el.attachEvent(type, handler);\n        }\n    }\n};\n\nexport const unbindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.removeEventListener) {\n            el.removeEventListener(type, handler);\n        } else if (el.detachEvent) {\n            el.detachEvent(type, handler);\n        }\n    }\n};\n\nexport const trigger = (el, type, data) => {\n    const evt = new CustomEvent(type, data);\n    el.dispatchEvent(evt);\n};\n\nexport const prepareEvent = (evt) => {\n    evt.preventDefault();\n    return evt.type.match(/^touch/) ? evt.changedTouches : evt;\n};\n\nexport const getScroll = () => {\n    const x = (window.pageXOffset !== undefined) ?\n        window.pageXOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollLeft;\n\n    const y = (window.pageYOffset !== undefined) ?\n        window.pageYOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollTop;\n    return {\n        x: x,\n        y: y\n    };\n};\n\nexport const applyPosition = (el, pos) => {\n    if (pos.top || pos.right || pos.bottom || pos.left) {\n        el.style.top = pos.top;\n        el.style.right = pos.right;\n        el.style.bottom = pos.bottom;\n        el.style.left = pos.left;\n    } else {\n        el.style.left = pos.x + 'px';\n        el.style.top = pos.y + 'px';\n    }\n};\n\nexport const getTransitionStyle = (property, values, time) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (typeof values === 'string') {\n                obj[i] = values + ' ' + time;\n            } else {\n                let st = '';\n                for (let j = 0, max = values.length; j < max; j += 1) {\n                    st += values[j] + ' ' + time + ', ';\n                }\n                obj[i] = st.slice(0, -2);\n            }\n        }\n    }\n    return obj;\n};\n\nexport const getVendorStyle = (property, value) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            obj[i] = value;\n        }\n    }\n    return obj;\n};\n\nexport const configStylePropertyObject = (prop) => {\n    const obj = {};\n    obj[prop] = '';\n    const vendors = ['webkit', 'Moz', 'o'];\n    vendors.forEach(function (vendor) {\n        obj[vendor + prop.charAt(0).toUpperCase() + prop.slice(1)] = '';\n    });\n    return obj;\n};\n\nexport const extend = (objA, objB) => {\n    for (let i in objB) {\n        if (objB.hasOwnProperty(i)) {\n            objA[i] = objB[i];\n        }\n    }\n    return objA;\n};\n\n// Overwrite only what's already present\nexport const safeExtend = (objA, objB) => {\n    const obj = {};\n    for (let i in objA) {\n        if (objA.hasOwnProperty(i) && objB.hasOwnProperty(i)) {\n            obj[i] = objB[i];\n        } else if (objA.hasOwnProperty(i)) {\n            obj[i] = objA[i];\n        }\n    }\n    return obj;\n};\n\n// Map for array or unique item.\nexport const map = (ar, fn) => {\n    if (ar.length) {\n        for (let i = 0, max = ar.length; i < max; i += 1) {\n            fn(ar[i]);\n        }\n    } else {\n        fn(ar);\n    }\n};\n\n// Clamp position within the range\nexport const clamp = (pos, nipplePos, size) => ({\n    //                          left-clamping        right-clamping\n    x: Math.min(Math.max(pos.x, nipplePos.x - size), nipplePos.x + size),\n    //                          top-clamping         bottom-clamping\n    y: Math.min(Math.max(pos.y, nipplePos.y - size), nipplePos.y + size)\n});\n","///////////////////////\n///   SUPER CLASS   ///\n///////////////////////\nimport * as u from './utils';\n\n// Constants\nvar isTouch = !!('ontouchstart' in window);\nvar isPointer = window.PointerEvent ? true : false;\nvar isMSPointer = window.MSPointerEvent ? true : false;\nvar events = {\n    touch: {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend, touchcancel'\n    },\n    mouse: {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    },\n    pointer: {\n        start: 'pointerdown',\n        move: 'pointermove',\n        end: 'pointerup, pointercancel'\n    },\n    MSPointer: {\n        start: 'MSPointerDown',\n        move: 'MSPointerMove',\n        end: 'MSPointerUp'\n    }\n};\nvar toBind;\nvar secondBind = {};\nif (isPointer) {\n    toBind = events.pointer;\n} else if (isMSPointer) {\n    toBind = events.MSPointer;\n} else if (isTouch) {\n    toBind = events.touch;\n    secondBind = events.mouse;\n} else {\n    toBind = events.mouse;\n}\n\nfunction Super () {}\n\n// Basic event system.\nSuper.prototype.on = function (arg, cb) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        self._handlers_[type] = self._handlers_[type] || [];\n        self._handlers_[type].push(cb);\n    }\n    return self;\n};\n\nSuper.prototype.off = function (type, cb) {\n    var self = this;\n    self._handlers_ = self._handlers_ || {};\n\n    if (type === undefined) {\n        self._handlers_ = {};\n    } else if (cb === undefined) {\n        self._handlers_[type] = null;\n    } else if (self._handlers_[type] &&\n            self._handlers_[type].indexOf(cb) >= 0) {\n        self._handlers_[type].splice(self._handlers_[type].indexOf(cb), 1);\n    }\n\n    return self;\n};\n\nSuper.prototype.trigger = function (arg, data) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (self._handlers_[type] && self._handlers_[type].length) {\n            self._handlers_[type].forEach(function (handler) {\n                handler.call(self, {\n                    type: type,\n                    target: self\n                }, data);\n            });\n        }\n    }\n};\n\n// Configuration\nSuper.prototype.config = function (options) {\n    var self = this;\n    self.options = self.defaults || {};\n    if (options) {\n        self.options = u.safeExtend(self.options, options);\n    }\n};\n\n// Bind internal events.\nSuper.prototype.bindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    self._domHandlers_[type] = function () {\n        if (typeof self['on' + type] === 'function') {\n            self['on' + type].apply(self, arguments);\n        } else {\n            // eslint-disable-next-line no-console\n            console.warn('[WARNING] : Missing \"on' + type + '\" handler.');\n        }\n    };\n\n    u.bindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.bindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    return self;\n};\n\n// Unbind dom events.\nSuper.prototype.unbindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    u.unbindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.unbindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    delete self._domHandlers_[type];\n\n    return this;\n};\n\nexport default Super;\n","import Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///   THE NIPPLE    ///\n///////////////////////\n\nfunction Nipple (collection, options) {\n    this.identifier = options.identifier;\n    this.position = options.position;\n    this.frontPosition = options.frontPosition;\n    this.collection = collection;\n\n    // Defaults\n    this.defaults = {\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        mode: 'dynamic',\n        zone: document.body,\n        lockX: false,\n        lockY: false,\n        shape: 'circle'\n    };\n\n    this.config(options);\n\n    // Overwrites\n    if (this.options.mode === 'dynamic') {\n        this.options.restOpacity = 0;\n    }\n\n    this.id = Nipple.id;\n    Nipple.id += 1;\n    this.buildEl()\n        .stylize();\n\n    // Nipple's API.\n    this.instance = {\n        el: this.ui.el,\n        on: this.on.bind(this),\n        off: this.off.bind(this),\n        show: this.show.bind(this),\n        hide: this.hide.bind(this),\n        add: this.addToDom.bind(this),\n        remove: this.removeFromDom.bind(this),\n        destroy: this.destroy.bind(this),\n        setPosition:this.setPosition.bind(this),\n        resetDirection: this.resetDirection.bind(this),\n        computeDirection: this.computeDirection.bind(this),\n        trigger: this.trigger.bind(this),\n        position: this.position,\n        frontPosition: this.frontPosition,\n        ui: this.ui,\n        identifier: this.identifier,\n        id: this.id,\n        options: this.options\n    };\n\n    return this.instance;\n}\n\nNipple.prototype = new Super();\nNipple.constructor = Nipple;\nNipple.id = 0;\n\n// Build the dom element of the Nipple instance.\nNipple.prototype.buildEl = function (options) {\n    this.ui = {};\n\n    if (this.options.dataOnly) {\n        return this;\n    }\n\n    this.ui.el = document.createElement('div');\n    this.ui.back = document.createElement('div');\n    this.ui.front = document.createElement('div');\n\n    this.ui.el.className = 'nipple collection_' + this.collection.id;\n    this.ui.back.className = 'back';\n    this.ui.front.className = 'front';\n\n    this.ui.el.setAttribute('id', 'nipple_' + this.collection.id +\n        '_' + this.id);\n\n    this.ui.el.appendChild(this.ui.back);\n    this.ui.el.appendChild(this.ui.front);\n\n    return this;\n};\n\n// Apply CSS to the Nipple instance.\nNipple.prototype.stylize = function () {\n    if (this.options.dataOnly) {\n        return this;\n    }\n    var animTime = this.options.fadeTime + 'ms';\n    var borderStyle = u.getVendorStyle('borderRadius', '50%');\n    var transitStyle = u.getTransitionStyle('transition', 'opacity', animTime);\n    var styles = {};\n    styles.el = {\n        position: 'absolute',\n        opacity: this.options.restOpacity,\n        display: 'block',\n        'zIndex': 999\n    };\n\n    styles.back = {\n        position: 'absolute',\n        display: 'block',\n        width: this.options.size + 'px',\n        height: this.options.size + 'px',\n        marginLeft: -this.options.size / 2 + 'px',\n        marginTop: -this.options.size / 2 + 'px',\n        background: this.options.color,\n        'opacity': '.5'\n    };\n\n    styles.front = {\n        width: this.options.size / 2 + 'px',\n        height: this.options.size / 2 + 'px',\n        position: 'absolute',\n        display: 'block',\n        marginLeft: -this.options.size / 4 + 'px',\n        marginTop: -this.options.size / 4 + 'px',\n        background: this.options.color,\n        'opacity': '.5',\n        transform: 'translate(0px, 0px)'\n    };\n\n    u.extend(styles.el, transitStyle);\n    if(this.options.shape === 'circle'){\n        u.extend(styles.back, borderStyle);\n    }\n    u.extend(styles.front, borderStyle);\n\n    this.applyStyles(styles);\n\n    return this;\n};\n\nNipple.prototype.applyStyles = function (styles) {\n    // Apply styles\n    for (var i in this.ui) {\n        if (this.ui.hasOwnProperty(i)) {\n            for (var j in styles[i]) {\n                this.ui[i].style[j] = styles[i][j];\n            }\n        }\n    }\n\n    return this;\n};\n\n// Inject the Nipple instance into DOM.\nNipple.prototype.addToDom = function () {\n    // We're not adding it if we're dataOnly or already in dom.\n    if (this.options.dataOnly || document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.appendChild(this.ui.el);\n    return this;\n};\n\n// Remove the Nipple instance from DOM.\nNipple.prototype.removeFromDom = function () {\n    if (this.options.dataOnly || !document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.removeChild(this.ui.el);\n    return this;\n};\n\n// Entirely destroy this nipple\nNipple.prototype.destroy = function () {\n    clearTimeout(this.removeTimeout);\n    clearTimeout(this.showTimeout);\n    clearTimeout(this.restTimeout);\n    this.trigger('destroyed', this.instance);\n    this.removeFromDom();\n    this.off();\n};\n\n// Fade in the Nipple instance.\nNipple.prototype.show = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.addToDom();\n\n    self.restCallback();\n\n    setTimeout(function () {\n        self.ui.el.style.opacity = 1;\n    }, 0);\n\n    self.showTimeout = setTimeout(function () {\n        self.trigger('shown', self.instance);\n        if (typeof cb === 'function') {\n            cb.call(this);\n        }\n    }, self.options.fadeTime);\n\n    return self;\n};\n\n// Fade out the Nipple instance.\nNipple.prototype.hide = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    self.ui.el.style.opacity = self.options.restOpacity;\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.removeTimeout = setTimeout(\n        function () {\n            var display = self.options.mode === 'dynamic' ? 'none' : 'block';\n            self.ui.el.style.display = display;\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n\n            self.trigger('hidden', self.instance);\n        },\n        self.options.fadeTime\n    );\n\n    if (self.options.restJoystick) {\n        const rest = self.options.restJoystick;\n        const newPosition = {};\n\n        newPosition.x = rest === true || rest.x !== false ? 0 : self.instance.frontPosition.x;\n        newPosition.y = rest === true || rest.y !== false ? 0 : self.instance.frontPosition.y;\n\n        self.setPosition(cb, newPosition);\n    }\n\n    return self;\n};\n\n// Set the nipple to the specified position\nNipple.prototype.setPosition = function (cb, position) {\n    var self = this;\n    self.frontPosition = {\n        x: position.x,\n        y: position.y\n    };\n    var animTime = self.options.fadeTime + 'ms';\n\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition',\n        ['transform'], animTime);\n\n    var styles = {front: {}};\n    styles.front = {\n        transform: 'translate(' + self.frontPosition.x + 'px,' + self.frontPosition.y + 'px)'\n    };\n\n    self.applyStyles(transitStyle);\n    self.applyStyles(styles);\n\n    self.restTimeout = setTimeout(\n        function () {\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n            self.restCallback();\n        },\n        self.options.fadeTime\n    );\n};\n\nNipple.prototype.restCallback = function () {\n    var self = this;\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition', 'none', '');\n    self.applyStyles(transitStyle);\n    self.trigger('rested', self.instance);\n};\n\nNipple.prototype.resetDirection = function () {\n    // Fully rebuild the object to let the iteration possible.\n    this.direction = {\n        x: false,\n        y: false,\n        angle: false\n    };\n};\n\nNipple.prototype.computeDirection = function (obj) {\n    var rAngle = obj.angle.radian;\n    var angle45 = Math.PI / 4;\n    var angle90 = Math.PI / 2;\n    var direction, directionX, directionY;\n\n    // Angular direction\n    //     \\  UP /\n    //      \\   /\n    // LEFT       RIGHT\n    //      /   \\\n    //     /DOWN \\\n    //\n    if (\n        rAngle > angle45 &&\n        rAngle < (angle45 * 3) &&\n        !obj.lockX\n    ) {\n        direction = 'up';\n    } else if (\n        rAngle > -angle45 &&\n        rAngle <= angle45 &&\n        !obj.lockY\n    ) {\n        direction = 'left';\n    } else if (\n        rAngle > (-angle45 * 3) &&\n        rAngle <= -angle45 &&\n        !obj.lockX\n    ) {\n        direction = 'down';\n    } else if (!obj.lockY) {\n        direction = 'right';\n    }\n\n    // Plain direction\n    //    UP                 |\n    // _______               | RIGHT\n    //                  LEFT |\n    //   DOWN                |\n    if (!obj.lockY) {\n        if (rAngle > -angle90 && rAngle < angle90) {\n            directionX = 'left';\n        } else {\n            directionX = 'right';\n        }\n    }\n\n    if (!obj.lockX) {\n        if (rAngle > 0) {\n            directionY = 'up';\n        } else {\n            directionY = 'down';\n        }\n    }\n\n    if (obj.force > this.options.threshold) {\n        var oldDirection = {};\n        var i;\n        for (i in this.direction) {\n            if (this.direction.hasOwnProperty(i)) {\n                oldDirection[i] = this.direction[i];\n            }\n        }\n\n        var same = {};\n\n        this.direction = {\n            x: directionX,\n            y: directionY,\n            angle: direction\n        };\n\n        obj.direction = this.direction;\n\n        for (i in oldDirection) {\n            if (oldDirection[i] === this.direction[i]) {\n                same[i] = true;\n            }\n        }\n\n        // If all 3 directions are the same, we don't trigger anything.\n        if (same.x && same.y && same.angle) {\n            return obj;\n        }\n\n        if (!same.x || !same.y) {\n            this.trigger('plain', obj);\n        }\n\n        if (!same.x) {\n            this.trigger('plain:' + directionX, obj);\n        }\n\n        if (!same.y) {\n            this.trigger('plain:' + directionY, obj);\n        }\n\n        if (!same.angle) {\n            this.trigger('dir dir:' + direction, obj);\n        }\n    } else {\n        this.resetDirection();\n    }\n\n    return obj;\n};\n\nexport default Nipple;\n","import Nipple from './nipple';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////////\n///   THE COLLECTION    ///\n///////////////////////////\n\nfunction Collection (manager, options) {\n    var self = this;\n    self.nipples = [];\n    self.idles = [];\n    self.actives = [];\n    self.ids = [];\n    self.pressureIntervals = {};\n    self.manager = manager;\n    self.id = Collection.id;\n    Collection.id += 1;\n\n    // Defaults\n    self.defaults = {\n        zone: document.body,\n        multitouch: false,\n        maxNumberOfNipples: 10,\n        mode: 'dynamic',\n        position: {top: 0, left: 0},\n        catchDistance: 200,\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        lockX: false,\n        lockY: false,\n        shape: 'circle',\n        dynamicPage: false,\n        follow: false\n    };\n\n    self.config(options);\n\n    // Overwrites\n    if (self.options.mode === 'static' || self.options.mode === 'semi') {\n        self.options.multitouch = false;\n    }\n\n    if (!self.options.multitouch) {\n        self.options.maxNumberOfNipples = 1;\n    }\n    const computedStyle = getComputedStyle(self.options.zone.parentElement);\n    if (computedStyle && computedStyle.display === 'flex') {\n        self.parentIsFlex = true;\n    }\n\n    self.updateBox();\n    self.prepareNipples();\n    self.bindings();\n    self.begin();\n\n    return self.nipples;\n}\n\nCollection.prototype = new Super();\nCollection.constructor = Collection;\nCollection.id = 0;\n\nCollection.prototype.prepareNipples = function () {\n    var self = this;\n    var nips = self.nipples;\n\n    // Public API Preparation.\n    nips.on = self.on.bind(self);\n    nips.off = self.off.bind(self);\n    nips.options = self.options;\n    nips.destroy = self.destroy.bind(self);\n    nips.ids = self.ids;\n    nips.id = self.id;\n    nips.processOnMove = self.processOnMove.bind(self);\n    nips.processOnEnd = self.processOnEnd.bind(self);\n    nips.get = function (id) {\n        if (id === undefined) {\n            return nips[0];\n        }\n        for (var i = 0, max = nips.length; i < max; i += 1) {\n            if (nips[i].identifier === id) {\n                return nips[i];\n            }\n        }\n        return false;\n    };\n};\n\nCollection.prototype.bindings = function () {\n    var self = this;\n    // Touch start event.\n    self.bindEvt(self.options.zone, 'start');\n    // Avoid native touch actions (scroll, zoom etc...) on the zone.\n    self.options.zone.style.touchAction = 'none';\n    self.options.zone.style.msTouchAction = 'none';\n};\n\nCollection.prototype.begin = function () {\n    var self = this;\n    var opts = self.options;\n\n    // We place our static nipple\n    // if needed.\n    if (opts.mode === 'static') {\n        var nipple = self.createNipple(\n            opts.position,\n            self.manager.getIdentifier()\n        );\n        // Add it to the dom.\n        nipple.add();\n        // Store it in idles.\n        self.idles.push(nipple);\n    }\n};\n\n// Nipple Factory\nCollection.prototype.createNipple = function (position, identifier) {\n    var self = this;\n    var scroll = self.manager.scroll;\n    var toPutOn = {};\n    var opts = self.options;\n    var offset = {\n        x: self.parentIsFlex ? scroll.x : (scroll.x + self.box.left),\n        y: self.parentIsFlex ? scroll.y : (scroll.y + self.box.top)\n    };\n\n    if (position.x && position.y) {\n        toPutOn = {\n            x: position.x - offset.x,\n            y: position.y - offset.y\n        };\n    } else if (\n        position.top ||\n        position.right ||\n        position.bottom ||\n        position.left\n    ) {\n\n        // We need to compute the position X / Y of the joystick.\n        var dumb = document.createElement('DIV');\n        dumb.style.display = 'hidden';\n        dumb.style.top = position.top;\n        dumb.style.right = position.right;\n        dumb.style.bottom = position.bottom;\n        dumb.style.left = position.left;\n        dumb.style.position = 'absolute';\n\n        opts.zone.appendChild(dumb);\n        var dumbBox = dumb.getBoundingClientRect();\n        opts.zone.removeChild(dumb);\n\n        toPutOn = position;\n        position = {\n            x: dumbBox.left + scroll.x,\n            y: dumbBox.top + scroll.y\n        };\n    }\n\n    var nipple = new Nipple(self, {\n        color: opts.color,\n        size: opts.size,\n        threshold: opts.threshold,\n        fadeTime: opts.fadeTime,\n        dataOnly: opts.dataOnly,\n        restJoystick: opts.restJoystick,\n        restOpacity: opts.restOpacity,\n        mode: opts.mode,\n        identifier: identifier,\n        position: position,\n        zone: opts.zone,\n        frontPosition: {\n            x: 0,\n            y: 0\n        },\n        shape: opts.shape\n    });\n\n    if (!opts.dataOnly) {\n        u.applyPosition(nipple.ui.el, toPutOn);\n        u.applyPosition(nipple.ui.front, nipple.frontPosition);\n    }\n    self.nipples.push(nipple);\n    self.trigger('added ' + nipple.identifier + ':added', nipple);\n    self.manager.trigger('added ' + nipple.identifier + ':added', nipple);\n\n    self.bindNipple(nipple);\n\n    return nipple;\n};\n\nCollection.prototype.updateBox = function () {\n    var self = this;\n    self.box = self.options.zone.getBoundingClientRect();\n};\n\nCollection.prototype.bindNipple = function (nipple) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's id.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed.\n    nipple.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    nipple.on('shown hidden rested dir plain', handler);\n    nipple.on('dir:up dir:right dir:down dir:left', handler);\n    nipple.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nCollection.prototype.pressureFn = function (touch, nipple, identifier) {\n    var self = this;\n    var previousPressure = 0;\n    clearInterval(self.pressureIntervals[identifier]);\n    // Create an interval that will read the pressure every 100ms\n    self.pressureIntervals[identifier] = setInterval(function () {\n        var pressure = touch.force || touch.pressure ||\n            touch.webkitForce || 0;\n        if (pressure !== previousPressure) {\n            nipple.trigger('pressure', pressure);\n            self.trigger('pressure ' +\n                nipple.identifier + ':pressure', pressure);\n            previousPressure = pressure;\n        }\n    }.bind(self), 100);\n};\n\nCollection.prototype.onstart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var origEvt = evt;\n    evt = u.prepareEvent(evt);\n\n    // Update the box position\n    self.updateBox();\n\n    var process = function (touch) {\n        // If we can create new nipples\n        // meaning we don't have more active nipples than we should.\n        if (self.actives.length < opts.maxNumberOfNipples) {\n            self.processOnStart(touch);\n        }\n        else if(origEvt.type.match(/^touch/)){\n            // zombies occur when end event is not received on Safari\n            // first touch removed before second touch, we need to catch up...\n            // so remove where touches in manager that no longer exist\n            Object.keys(self.manager.ids).forEach(function(k){\n                if(Object.values(origEvt.touches).findIndex(function(t){return t.identifier===k;}) < 0){\n                    // manager has id that doesn't exist in touches\n                    var e = [evt[0]];\n                    e.identifier = k;\n                    self.processOnEnd(e);\n                }\n            });\n            if(self.actives.length < opts.maxNumberOfNipples){\n                self.processOnStart(touch);\n            }\n        }\n    };\n\n    u.map(evt, process);\n\n    // We ask upstream to bind the document\n    // on 'move' and 'end'\n    self.manager.bindDocument();\n    return false;\n};\n\nCollection.prototype.processOnStart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var indexInIdles;\n    var identifier = self.manager.getIdentifier(evt);\n    var pressure = evt.force || evt.pressure || evt.webkitForce || 0;\n    var position = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    var nipple = self.getOrCreate(identifier, position);\n\n    // Update its touch identifier\n    if (nipple.identifier !== identifier) {\n        self.manager.removeIdentifier(nipple.identifier);\n    }\n    nipple.identifier = identifier;\n\n    var process = function (nip) {\n        // Trigger the start.\n        nip.trigger('start', nip);\n        self.trigger('start ' + nip.id + ':start', nip);\n\n        nip.show();\n        if (pressure > 0) {\n            self.pressureFn(evt, nip, nip.identifier);\n        }\n        // Trigger the first move event.\n        self.processOnMove(evt);\n    };\n\n    // Transfer it from idles to actives.\n    if ((indexInIdles = self.idles.indexOf(nipple)) >= 0) {\n        self.idles.splice(indexInIdles, 1);\n    }\n\n    // Store the nipple in the actives array\n    self.actives.push(nipple);\n    self.ids.push(nipple.identifier);\n\n    if (opts.mode !== 'semi') {\n        process(nipple);\n    } else {\n        // In semi we check the distance of the touch\n        // to decide if we have to reset the nipple\n        var distance = u.distance(position, nipple.position);\n        if (distance <= opts.catchDistance) {\n            process(nipple);\n        } else {\n            nipple.destroy();\n            self.processOnStart(evt);\n            return;\n        }\n    }\n\n    return nipple;\n};\n\nCollection.prototype.getOrCreate = function (identifier, position) {\n    var self = this;\n    var opts = self.options;\n    var nipple;\n\n    // If we're in static or semi, we might already have an active.\n    if (/(semi|static)/.test(opts.mode)) {\n        // Get the active one.\n        // TODO: Multi-touche for semi and static will start here.\n        // Return the nearest one.\n        nipple = self.idles[0];\n        if (nipple) {\n            self.idles.splice(0, 1);\n            return nipple;\n        }\n\n        if (opts.mode === 'semi') {\n            // If we're in semi mode, we need to create one.\n            return self.createNipple(position, identifier);\n        }\n\n        // eslint-disable-next-line no-console\n        console.warn('Coudln\\'t find the needed nipple.');\n        return false;\n    }\n    // In dynamic, we create a new one.\n    nipple = self.createNipple(position, identifier);\n    return nipple;\n};\n\nCollection.prototype.processOnMove = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var scroll = self.manager.scroll;\n\n    // If we're moving without pressing\n    // it's that we went out the active zone\n    if (!u.isPressed(evt)) {\n        this.processOnEnd(evt);\n        return;\n    }\n\n    if (!nipple) {\n        // This is here just for safety.\n        // It shouldn't happen.\n        // eslint-disable-next-line no-console\n        console.error('Found zombie joystick with ID ' + identifier);\n        self.manager.removeIdentifier(identifier);\n        return;\n    }\n\n    if (opts.dynamicPage) {\n        var elBox = nipple.el.getBoundingClientRect();\n        nipple.position = {\n            x: scroll.x + elBox.left,\n            y: scroll.y + elBox.top\n        };\n    }\n\n    nipple.identifier = identifier;\n\n    var size = nipple.options.size / 2;\n    var pos = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    if (opts.lockX){\n        pos.y = nipple.position.y;\n    }\n    if (opts.lockY) {\n        pos.x = nipple.position.x;\n    }\n\n    var dist = u.distance(pos, nipple.position);\n    var angle = u.angle(pos, nipple.position);\n    var rAngle = u.radians(angle);\n    var force = dist / size;\n\n    var raw = {\n        distance: dist,\n        position: pos\n    };\n\n    // Clamp the position\n    var clamped_dist;\n    var clamped_pos;\n    if (nipple.options.shape === 'circle') {\n        // Clamp to a circle\n        clamped_dist = Math.min(dist, size);\n        clamped_pos = u.findCoord(nipple.position, clamped_dist, angle);\n    } else {\n        // Clamp to a square\n        clamped_pos = u.clamp(pos, nipple.position, size);\n        clamped_dist = u.distance(clamped_pos, nipple.position);\n    }\n\n    if (opts.follow) {\n        // follow behaviour\n        if (dist > size) {\n            let delta_x = pos.x - clamped_pos.x;\n            let delta_y = pos.y - clamped_pos.y;\n            nipple.position.x += delta_x;\n            nipple.position.y += delta_y;\n            nipple.el.style.top = (nipple.position.y - (self.box.top + scroll.y)) + 'px';\n            nipple.el.style.left = (nipple.position.x - (self.box.left + scroll.x)) + 'px';\n\n            dist = u.distance(pos, nipple.position);\n        }\n    } else {\n        // clamp behaviour\n        pos = clamped_pos;\n        dist = clamped_dist;\n    }\n\n    var xPosition = pos.x - nipple.position.x;\n    var yPosition = pos.y - nipple.position.y;\n\n    nipple.frontPosition = {\n        x: xPosition,\n        y: yPosition\n    };\n\n    if (!opts.dataOnly) {\n        nipple.ui.front.style.transform = 'translate(' + xPosition + 'px,' + yPosition + 'px)';\n    }\n\n    // Prepare event's datas.\n    var toSend = {\n        identifier: nipple.identifier,\n        position: pos,\n        force: force,\n        pressure: evt.force || evt.pressure || evt.webkitForce || 0,\n        distance: dist,\n        angle: {\n            radian: rAngle,\n            degree: angle\n        },\n        vector: {\n            x: xPosition / size,\n            y: - yPosition / size\n        },\n        raw: raw,\n        instance: nipple,\n        lockX: opts.lockX,\n        lockY: opts.lockY\n    };\n\n    // Compute the direction's datas.\n    toSend = nipple.computeDirection(toSend);\n\n    // Offset angles to follow units circle.\n    toSend.angle = {\n        radian: u.radians(180 - angle),\n        degree: 180 - angle\n    };\n\n    // Send everything to everyone.\n    nipple.trigger('move', toSend);\n    self.trigger('move ' + nipple.id + ':move', toSend);\n};\n\nCollection.prototype.processOnEnd = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var removedIdentifier = self.manager.removeIdentifier(nipple.identifier);\n\n    if (!nipple) {\n        return;\n    }\n\n    if (!opts.dataOnly) {\n        nipple.hide(function () {\n            if (opts.mode === 'dynamic') {\n                nipple.trigger('removed', nipple);\n                self.trigger('removed ' + nipple.id + ':removed', nipple);\n                self.manager\n                    .trigger('removed ' + nipple.id + ':removed', nipple);\n                nipple.destroy();\n            }\n        });\n    }\n\n    // Clear the pressure interval reader\n    clearInterval(self.pressureIntervals[nipple.identifier]);\n\n    // Reset the direciton of the nipple, to be able to trigger a new direction\n    // on start.\n    nipple.resetDirection();\n\n    nipple.trigger('end', nipple);\n    self.trigger('end ' + nipple.id + ':end', nipple);\n\n    // Remove identifier from our bank.\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Clean our actives array.\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n\n    if (/(semi|static)/.test(opts.mode)) {\n        // Transfer nipple from actives to idles\n        // if we're in semi or static mode.\n        self.idles.push(nipple);\n    } else if (self.nipples.indexOf(nipple) >= 0) {\n        // Only if we're not in semi or static mode\n        // we can remove the instance.\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n\n    // We add back the identifier of the idle nipple;\n    if (/(semi|static)/.test(opts.mode)) {\n        self.manager.ids[removedIdentifier.id] = removedIdentifier.identifier;\n    }\n};\n\n// Remove destroyed nipple from the lists\nCollection.prototype.onDestroyed = function(evt, nipple) {\n    var self = this;\n    if (self.nipples.indexOf(nipple) >= 0) {\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n    if (self.idles.indexOf(nipple) >= 0) {\n        self.idles.splice(self.idles.indexOf(nipple), 1);\n    }\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Remove the identifier from our bank\n    self.manager.removeIdentifier(nipple.identifier);\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n};\n\n// Cleanly destroy the manager\nCollection.prototype.destroy = function () {\n    var self = this;\n    self.unbindEvt(self.options.zone, 'start');\n\n    // Destroy nipples.\n    self.nipples.forEach(function(nipple) {\n        nipple.destroy();\n    });\n\n    // Clean 3DTouch intervals.\n    for (var i in self.pressureIntervals) {\n        if (self.pressureIntervals.hasOwnProperty(i)) {\n            clearInterval(self.pressureIntervals[i]);\n        }\n    }\n\n    // Notify the manager passing the instance\n    self.trigger('destroyed', self.nipples);\n    // We unbind move and end.\n    self.manager.unbindDocument();\n    // Unbind everything.\n    self.off();\n};\n\nexport default Collection;\n","import Collection from './collection';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///     MANAGER     ///\n///////////////////////\n\nfunction Manager (options) {\n    var self = this;\n    self.ids = {};\n    self.index = 0;\n    self.collections = [];\n    self.scroll = u.getScroll();\n\n    self.config(options);\n    self.prepareCollections();\n\n    // Listen for resize, to reposition every joysticks\n    var resizeHandler = function () {\n        var pos;\n        self.collections.forEach(function (collection) {\n            collection.forEach(function (nipple) {\n                pos = nipple.el.getBoundingClientRect();\n                nipple.position = {\n                    x: self.scroll.x + pos.left,\n                    y: self.scroll.y + pos.top\n                };\n            });\n        });\n    };\n    u.bindEvt(window, 'resize', function () {\n        u.throttle(resizeHandler);\n    });\n\n    // Listen for scrolls, so we have a global scroll value\n    // without having to request it all the time.\n    var scrollHandler = function () {\n        self.scroll = u.getScroll();\n    };\n    u.bindEvt(window, 'scroll', function () {\n        u.throttle(scrollHandler);\n    });\n\n    return self.collections;\n}\n\nManager.prototype = new Super();\nManager.constructor = Manager;\n\nManager.prototype.prepareCollections = function () {\n    var self = this;\n    // Public API Preparation.\n    self.collections.create = self.create.bind(self);\n    // Listen to anything\n    self.collections.on = self.on.bind(self);\n    // Unbind general events\n    self.collections.off = self.off.bind(self);\n    // Destroy everything\n    self.collections.destroy = self.destroy.bind(self);\n    // Get any nipple\n    self.collections.get = function (id) {\n        var nipple;\n        // Use .every() to break the loop as soon as found.\n        self.collections.every(function (collection) {\n            nipple = collection.get(id);\n            return nipple ? false : true;\n        });\n        return nipple;\n    };\n};\n\nManager.prototype.create = function (options) {\n    return this.createCollection(options);\n};\n\n// Collection Factory\nManager.prototype.createCollection = function (options) {\n    var self = this;\n    var collection = new Collection(self, options);\n\n    self.bindCollection(collection);\n    self.collections.push(collection);\n\n    return collection;\n};\n\nManager.prototype.bindCollection = function (collection) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's identifier.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed we clean.\n    collection.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    collection.on('shown hidden rested dir plain', handler);\n    collection.on('dir:up dir:right dir:down dir:left', handler);\n    collection.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nManager.prototype.bindDocument = function () {\n    var self = this;\n    // Bind only if not already binded\n    if (!self.binded) {\n        self.bindEvt(document, 'move')\n            .bindEvt(document, 'end');\n        self.binded = true;\n    }\n};\n\nManager.prototype.unbindDocument = function (force) {\n    var self = this;\n    // If there are no touch left\n    // unbind the document.\n    if (!Object.keys(self.ids).length || force === true) {\n        self.unbindEvt(document, 'move')\n            .unbindEvt(document, 'end');\n        self.binded = false;\n    }\n};\n\nManager.prototype.getIdentifier = function (evt) {\n    var id;\n    // If no event, simple increment\n    if (!evt) {\n        id = this.index;\n    } else {\n        // Extract identifier from event object.\n        // Unavailable in mouse events so replaced by latest increment.\n        id = evt.identifier === undefined ? evt.pointerId : evt.identifier;\n        if (id === undefined) {\n            id = this.latest || 0;\n        }\n    }\n\n    if (this.ids[id] === undefined) {\n        this.ids[id] = this.index;\n        this.index += 1;\n    }\n\n    // Keep the latest id used in case we're using an unidentified mouseEvent\n    this.latest = id;\n    return this.ids[id];\n};\n\nManager.prototype.removeIdentifier = function (identifier) {\n    var removed = {};\n    for (var id in this.ids) {\n        if (this.ids[id] === identifier) {\n            removed.id = id;\n            removed.identifier = this.ids[id];\n            delete this.ids[id];\n            break;\n        }\n    }\n    return removed;\n};\n\nManager.prototype.onmove = function (evt) {\n    var self = this;\n    self.onAny('move', evt);\n    return false;\n};\n\nManager.prototype.onend = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.oncancel = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.onAny = function (which, evt) {\n    var self = this;\n    var id;\n    var processFn = 'processOn' + which.charAt(0).toUpperCase() +\n        which.slice(1);\n    evt = u.prepareEvent(evt);\n    var processColl = function (e, id, coll) {\n        if (coll.ids.indexOf(id) >= 0) {\n            coll[processFn](e);\n            // Mark the event to avoid cleaning it later.\n            e._found_ = true;\n        }\n    };\n    var processEvt = function (e) {\n        id = self.getIdentifier(e);\n        u.map(self.collections, processColl.bind(null, e, id));\n        // If the event isn't handled by any collection,\n        // we need to clean its identifier.\n        if (!e._found_) {\n            self.removeIdentifier(id);\n        }\n    };\n\n    u.map(evt, processEvt);\n\n    return false;\n};\n\n// Cleanly destroy the manager\nManager.prototype.destroy = function () {\n    var self = this;\n    self.unbindDocument(true);\n    self.ids = {};\n    self.index = 0;\n    self.collections.forEach(function(collection) {\n        collection.destroy();\n    });\n    self.off();\n};\n\n// When a collection gets destroyed\n// we clean behind.\nManager.prototype.onDestroyed = function (evt, coll) {\n    var self = this;\n    if (self.collections.indexOf(coll) < 0) {\n        return false;\n    }\n    self.collections.splice(self.collections.indexOf(coll), 1);\n};\n\nexport default Manager;\n","import Manager from './manager';\n\nconst factory = new Manager();\nexport default {\n    create: function (options) {\n        return factory.create(options);\n    },\n    factory: factory\n};\n","import nipplejs from \"nipplejs\";\r\n\r\nexport class JoyRtcComponent extends HTMLElement {\r\n\tprivate ws: WebSocket | null = null;\r\n\tprivate pc: RTCPeerConnection | null = null;\r\n\tprivate dc: RTCDataChannel | null = null;\r\n\r\n\tprivate bar: HTMLDivElement;\r\n\tprivate root: ShadowRoot;\r\n\r\n\tprivate domWsState: HTMLParagraphElement;\r\n\tprivate domPcState: HTMLParagraphElement;\r\n\tprivate domDcState: HTMLParagraphElement;\r\n\tprivate domGamepadState: HTMLParagraphElement; // 添加了domGamepadState变量\r\n\r\n\tprivate gamepadIndex: number | null = null;\r\n    private gamepadAxesListener: ((event: GamepadEvent) => void) | null = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst template = document.createElement(\"template\");\r\n\r\n\t\tthis.root = this.attachShadow({ mode: \"closed\" });\r\n\t\tthis.bar = document.createElement(\"div\");\r\n\t\tthis.bar.style.display = \"flex\";\r\n\t\tthis.bar.style.justifyContent = \"space-evenly\";\r\n\t\tthis.root.appendChild(this.bar);\r\n\r\n\t\tthis.domWsState = document.createElement(\"p\");\r\n\t\tthis.bar.appendChild(this.domWsState);\r\n\r\n\t\tthis.domPcState = document.createElement(\"p\");\r\n\t\tthis.bar.appendChild(this.domPcState);\r\n\r\n\t\tthis.domDcState = document.createElement(\"p\");\r\n\t\tthis.bar.appendChild(this.domDcState);\r\n\r\n\t\tthis.domGamepadState = document.createElement(\"p\"); // 添加了domGamepadState初始化\r\n\t\tthis.bar.appendChild(this.domGamepadState); // 添加了domGamepadState元素\r\n\r\n\t\tthis.websocketState = \"uninit\";\r\n\t\tthis.webrtcState = \"uninit\";\r\n\t\tthis.dataChannelState = \"uninit\";\r\n\r\n\t\tconst buttonStart = document.createElement(\"button\");\r\n\t\tbuttonStart.onclick = () => {\r\n\t\t\tthis.startWebsocket();\r\n\t\t};\r\n\t\tbuttonStart.innerText = \"start\";\r\n\r\n\t\tthis.bar.appendChild(buttonStart);\r\n\r\n\t\tconst buttonClick = document.createElement(\"button\");\r\n\t\tbuttonClick.innerText = \"切换相机模式\";\r\n\t\tbuttonClick.addEventListener(\"click\", () => {\r\n\t\t\tthis.handleClick();\r\n\t\t});\r\n\t\tthis.root.appendChild(buttonClick);\r\n\r\n\t\t// 创建两个容器\r\n\t\tconst pad1 = document.createElement(\"div\");\r\n\t\tpad1.innerText = \"摇杆1\";\r\n\t\tconst pad2 = document.createElement(\"div\");\r\n\t\tpad2.innerText = \"摇杆2\";\r\n\t\tconst ipad1 = document.createElement(\"div\");\r\n\t\tconst ipad2 = document.createElement(\"div\");\r\n\t\tpad1.appendChild(ipad1);\r\n\t\tpad2.appendChild(ipad2);\r\n\t\tthis.root.appendChild(pad1);\r\n\t\tthis.root.appendChild(pad2);\r\n\r\n\t\t// 创建第一个摇杆\r\n\t\tconst instance1 = nipplejs.create({\r\n\t\t\tzone: ipad1,\r\n\t\t\tmode: \"static\",\r\n\t\t\tposition: {\r\n\t\t\t\ttop: \"50%\",\r\n\t\t\t\tleft: \"25%\",\r\n\t\t\t},\r\n\t\t\tdynamicPage: true,\r\n\t\t\trestOpacity: 0.6,\r\n\t\t\tfadeTime: 200,\r\n\t\t});\r\n\t\tinstance1.on(\"move\", (_, data) => {\r\n\t\t\tconst message = { joystick1: { x: data.vector.x, y: data.vector.y } };\r\n\t\t\tthis.dc?.send(JSON.stringify(message));\r\n\t\t});\r\n\r\n\t\t// 创建第二个摇杆\r\n\t\tconst instance2 = nipplejs.create({\r\n\t\t\tzone: ipad2,\r\n\t\t\tmode: \"static\",\r\n\t\t\tposition: {\r\n\t\t\t\ttop: \"50%\",\r\n\t\t\t\tleft: \"75%\",\r\n\t\t\t},\r\n\t\t\tdynamicPage: true,\r\n\t\t\trestOpacity: 0.6,\r\n\t\t\tfadeTime: 200,\r\n\t\t});\r\n\t\tinstance2.on(\"move\", (_, data) => {\r\n\t\t\tconst message = { joystick2: { x: data.vector.x, y: data.vector.y } };\r\n\t\t\tthis.dc?.send(JSON.stringify(message));\r\n\t\t});\r\n\r\n\t\tconst content = template.content.cloneNode(true);\r\n\t\tthis.root.appendChild(content);\r\n\t}\r\n\r\n\tset websocketState(state: string) {\r\n\t\tthis.domWsState.innerText = `websocket: ${state}`;\r\n\t}\r\n\r\n\tset webrtcState(state: string) {\r\n\t\tthis.domPcState.innerText = `webrtc: ${state}`;\r\n\t}\r\n\r\n\tset dataChannelState(state: string) {\r\n\t\tthis.domDcState.innerText = `dataChannel: ${state}`;\r\n\t}\r\n\r\n\tget debug(): boolean {\r\n\t\treturn !!this.getAttribute(\"debug\");\r\n\t}\r\n\r\n\tget autoplay(): boolean {\r\n\t\treturn !!this.getAttribute(\"autoplay\");\r\n\t}\r\n\r\n\tget address(): string {\r\n\t\treturn this.getAttribute(\"address\") || \"\";\r\n\t}\r\n\r\n\tset address(value: string) {\r\n\t\tthis.setAttribute(\"address\", value);\r\n\t}\r\n\r\n\tstartWebsocket() {\r\n\t\tconsole.log(\"websocket start\");\r\n\t\tthis.ws = new WebSocket(this.address);\r\n\t\tthis.ws.onopen = (ev) => {\r\n\t\t\tconsole.log(\"onopen\", ev);\r\n\t\t\tthis.websocketState = ev.type;\r\n\t\t\tthis.startWebRTC();\r\n\t\t};\r\n\t\tthis.ws.onclose = (ev) => (this.websocketState = ev.type);\r\n\t\tthis.ws.onerror = (ev) => (this.websocketState = ev.type);\r\n\r\n\t\tthis.ws.onmessage = (ev) => {\r\n\t\t\tconsole.log(\"onmessage\", ev.data);\r\n\t\t\tconst sdp = JSON.parse(ev.data);\r\n\t\t\tconsole.log(sdp);\r\n\t\t\tif (sdp.type === \"answer\") {\r\n\t\t\t\tif (!this.pc) return;\r\n\t\t\t\tthis.pc.setRemoteDescription(sdp);\r\n      } else if (sdp.type === \"ice\") {\r\n        this.pc?.addIceCandidate(new RTCIceCandidate({\r\n          //sdpMLineIndex: sdp.id,\r\n          sdpMid: sdp.label,\r\n          candidate: sdp.candidate,\r\n        }));\r\n      }\r\n\t\t};\r\n\t\tthis.startGamepadListening();\r\n\t}\r\n\r\n\tasync startWebRTC() {\r\n\t\tconsole.log(this.ws);\r\n\t\tif (!this.ws) return;\r\n\t\tthis.webrtcState = \"init\";\r\n\t\tconst ws = this.ws;\r\n\t\tconst pc = new RTCPeerConnection({\r\n        iceServers: [\r\n          {\r\n            urls: [\"stun:stun.22333.fun\"],\r\n          },\r\n          {\r\n            urls: \"turn:turn.22333.fun\",\r\n            username: \"filegogo\",\r\n            credential: \"filegogo\",\r\n          },\r\n        ],\r\n    });\r\n\t\tthis.pc = pc;\r\n\r\n\t\tthis.dc = pc.createDataChannel(\"data\", {\r\n\t\t\tnegotiated: true,\r\n\t\t\tid: 0,\r\n\t\t});\r\n\r\n\t\tthis.dc.onopen = (ev) => (this.dataChannelState = ev.type);\r\n\t\tthis.dc.onclose = (ev) => (this.dataChannelState = ev.type);\r\n\t\tthis.dc.onerror = (ev) => (this.dataChannelState = ev.type);\r\n\t\tthis.dc.onmessage = (ev) => console.log(ev.data);\r\n\r\n\t\tpc.onicecandidate = (ev: RTCPeerConnectionIceEvent) =>\r\n\t\t\tev.candidate ? console.log(ev) : ws.send(JSON.stringify(pc.localDescription));\r\n\t\tpc.oniceconnectionstatechange = (_) => (this.webrtcState = pc.iceConnectionState);\r\n\t\tpc.addTransceiver(\"video\", { direction: \"recvonly\" });\r\n\r\n    //// 添加接收音频的轨道\r\n    //pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\r\n\r\n\t\tpc.ontrack = (event) => {\r\n      if (event.track.kind === \"audio\")\r\n      {\r\n        // 处理接收到的音频轨道\r\n        const audioElement = document.createElement(\"audio\");\r\n        audioElement.srcObject = event.streams[0];\r\n        audioElement.autoplay = true;\r\n        audioElement.controls = true;\r\n        audioElement.muted = false;\r\n\r\n        document.body.appendChild(audioElement);\r\n      }\r\n      else if (event.track.kind === \"video\")\r\n      {\r\n        // 处理接收到的视频轨道\r\n        const videoElement = document.createElement(\"video\");\r\n        videoElement.srcObject = event.streams[0];\r\n        videoElement.autoplay = true;\r\n        videoElement.controls = true;\r\n        videoElement.muted = false;\r\n\r\n        document.body.appendChild(videoElement);\r\n      }\r\n\t\t};\r\n\r\n\t\tconst offer = await pc.createOffer();\r\n\t\tawait pc.setLocalDescription(offer);\r\n\t\tthis.startGamepadListening();\r\n\t}\r\n\r\n  private startGamepadListening() {\r\n    if (!this.gamepadIndex) {\r\n      window.ongamepaddisconnected = (event) => {\r\n        const gamepad = event.gamepad;\r\n        this.gamepadIndex = gamepad.index;\r\n        this.domGamepadState.innerHTML = `gamepad: connected`;\r\n\r\n        this.gamepadAxesListener = () => {\r\n          if (this.gamepadIndex) {\r\n            const gamepad = navigator.getGamepads()[this.gamepadIndex];\r\n            if (gamepad) {\r\n              const axes = gamepad.axes;\r\n\r\n              // 判断摇杆数量\r\n              if (axes.length >= 4) {\r\n                // 检查摇杆是否停止移动\r\n                const joystick1 = { x: axes[0] || 0, y: -(axes[1] || 0) };\r\n                const joystick2 = { x: axes[2] || 0, y: -(axes[3] || 0) };\r\n\r\n                const message = { joystick1, joystick2 };\r\n                this.dc?.send(JSON.stringify(message));\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        window.addEventListener(\"gamepaddisconnected\", this.gamepadAxesListener);\r\n\r\n        window.requestAnimationFrame(this.checkGamepadAxes);\r\n      }\r\n\r\n        window.addEventListener(\"gamepaddisconnected\", () => {\r\n            this.gamepadIndex = null;\r\n            this.domGamepadState.innerHTML = `gamepad: disconnected`;\r\n\r\n            // 移除停止监听器\r\n            window.removeEventListener(\"gamepaddisconnected\", this.gamepadAxesListener!);\r\n            this.gamepadAxesListener = null;\r\n        });\r\n    }\r\n    window.requestAnimationFrame(this.checkGamepadAxes);\r\n}\r\n\t    private checkGamepadAxes = () => {\r\n        if (this.gamepadIndex !== null && this.gamepadAxesListener) {\r\n            const gamepad = navigator.getGamepads()[this.gamepadIndex];\r\n            if (gamepad) {\r\n                this.gamepadAxesListener(new GamepadEvent(\"gamepaddisconnected\", { gamepad }));\r\n            }\r\n        }\r\n\r\n        window.requestAnimationFrame(this.checkGamepadAxes);\r\n    }\r\n\r\n\thandleClick() {\r\n\tconst message = { type: \"camera_mode_toggle\" };\r\n\t this.dc?.send(JSON.stringify(message));\r\n\t}\r\n\r\n  // WebComponents hook\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements#using_the_lifecycle_callbacks\r\n  connectedCallback() {\r\n    console.log(\"autoplay: \", this.autoplay);\r\n    console.log(navigator.getGamepads());\r\n    if (this.autoplay) {\r\n      console.log(\"autoplay\");\r\n      this.startWebsocket();\r\n    }\r\n  }\r\n}\r\n\r\ncustomElements.define(\"joy-rtc\", JoyRtcComponent);\r\n\r\nexport default JoyRtcComponent;\r\n"],"names":["distance","p1","p2","dx","x","dy","y","Math","sqrt","radians","a","PI","degrees","timers","Map","throttle","cb","has","clearTimeout","get","set","setTimeout","bindEvt","el","arg","handler","types","split","type","i","length","addEventListener","attachEvent","unbindEvt","removeEventListener","detachEvent","prepareEvent","evt","preventDefault","match","changedTouches","getScroll","window","pageXOffset","document","documentElement","body","parentNode","scrollLeft","pageYOffset","scrollTop","applyPosition","pos","top","right","bottom","left","style","getTransitionStyle","property","values","time","obj","configStylePropertyObject","hasOwnProperty","st","j","max","slice","prop","forEach","vendor","charAt","toUpperCase","extend","objA","objB","map","ar","fn","toBind","isTouch","isPointer","PointerEvent","isMSPointer","MSPointerEvent","events","start","move","end","secondBind","Super","Nipple","collection","options","this","identifier","position","frontPosition","defaults","size","threshold","color","fadeTime","dataOnly","restJoystick","restOpacity","mode","zone","lockX","lockY","shape","config","id","buildEl","stylize","instance","ui","on","bind","off","show","hide","add","addToDom","remove","removeFromDom","destroy","setPosition","resetDirection","computeDirection","trigger","Collection","manager","self","nipples","idles","actives","ids","pressureIntervals","multitouch","maxNumberOfNipples","catchDistance","dynamicPage","follow","computedStyle","getComputedStyle","parentElement","display","parentIsFlex","updateBox","prepareNipples","bindings","begin","Manager","index","collections","scroll","u.getScroll","prepareCollections","resizeHandler","nipple","getBoundingClientRect","u.throttle","scrollHandler","prototype","_handlers_","push","indexOf","splice","data","call","target","u.safeExtend","_domHandlers_","apply","arguments","console","warn","u.bindEvt","u.unbindEvt","constructor","createElement","back","front","className","setAttribute","appendChild","animTime","borderStyle","value","u.getVendorStyle","transitStyle","u.getTransitionStyle","styles","opacity","zIndex","width","height","marginLeft","marginTop","background","transform","applyStyles","contains","removeChild","removeTimeout","showTimeout","restTimeout","restCallback","rest","newPosition","direction","angle","directionX","directionY","rAngle","radian","angle45","angle90","force","oldDirection","same","nips","processOnMove","processOnEnd","touchAction","msTouchAction","opts","createNipple","getIdentifier","toPutOn","offset","box","dumb","dumbBox","u.applyPosition","bindNipple","onDestroyed","pressureFn","touch","previousPressure","clearInterval","setInterval","pressure","webkitForce","onstart","origEvt","u.prepareEvent","u.map","processOnStart","Object","keys","k","touches","findIndex","t","e","bindDocument","indexInIdles","pageX","pageY","getOrCreate","removeIdentifier","process","nip","u.distance","test","isNaN","buttons","u.isPressed","error","elBox","clamped_dist","clamped_pos","dist","atan2","u.angle","u.radians","raw","min","p","d","b","cos","sin","u.findCoord","nipplePos","u.clamp","delta_x","delta_y","xPosition","yPosition","toSend","degree","vector","removedIdentifier","unbindDocument","create","every","createCollection","bindCollection","binded","pointerId","latest","removed","onmove","onAny","onend","oncancel","which","processFn","processColl","coll","_found_","factory","nipplejs","JoyRtcComponent","HTMLElement","__publicField","gamepadIndex","gamepadAxesListener","gamepad","navigator","getGamepads","GamepadEvent","requestAnimationFrame","checkGamepadAxes","template","root","attachShadow","bar","justifyContent","domWsState","domPcState","domDcState","domGamepadState","websocketState","webrtcState","dataChannelState","buttonStart","onclick","startWebsocket","innerText","buttonClick","handleClick","pad1","pad2","ipad1","ipad2","_","message","joystick1","_a","dc","send","JSON","stringify","joystick2","content","cloneNode","state","debug","getAttribute","autoplay","address","log","ws","WebSocket","onopen","ev","startWebRTC","onclose","onerror","onmessage","sdp","parse","pc","setRemoteDescription","addIceCandidate","RTCIceCandidate","sdpMid","label","candidate","startGamepadListening","RTCPeerConnection","iceServers","urls","username","credential","createDataChannel","negotiated","onicecandidate","localDescription","oniceconnectionstatechange","iceConnectionState","addTransceiver","ontrack","event","track","kind","audioElement","srcObject","streams","controls","muted","videoElement","offer","createOffer","setLocalDescription","ongamepaddisconnected","innerHTML","axes","connectedCallback","customElements","define"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}